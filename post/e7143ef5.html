<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>正点原子STM32F429IGT6学习 | Luckys-Yangの小栈</title><meta name="author" content="Luckys-Yang"><meta name="copyright" content="Luckys-Yang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="前言 今天师兄给了一块正点原子的 STM32F4系列的板子我学习，这板挺贵的，肯定得学呀！写下此笔记记录… 本笔记涉及到网址及博主文章： CubeMX官方下载地址：https:&#x2F;&#x2F;www.st.com&#x2F;zh&#x2F;development-tools&#x2F;stm32cubemx.html ST官网—STM32F429IG资料 硬汉嵌入式论坛 STM32 ST-LINK Utility下载网址 参考博主文章：">
<meta property="og:type" content="article">
<meta property="og:title" content="正点原子STM32F429IGT6学习">
<meta property="og:url" content="https://mdcm.yang5201314.cn/post/e7143ef5.html">
<meta property="og:site_name" content="Luckys-Yangの小栈">
<meta property="og:description" content="前言 今天师兄给了一块正点原子的 STM32F4系列的板子我学习，这板挺贵的，肯定得学呀！写下此笔记记录… 本笔记涉及到网址及博主文章： CubeMX官方下载地址：https:&#x2F;&#x2F;www.st.com&#x2F;zh&#x2F;development-tools&#x2F;stm32cubemx.html ST官网—STM32F429IG资料 硬汉嵌入式论坛 STM32 ST-LINK Utility下载网址 参考博主文章：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mdcm.yang5201314.cn/img/num105.webp">
<meta property="article:published_time" content="2022-11-04T08:55:00.000Z">
<meta property="article:modified_time" content="2022-11-18T02:17:48.000Z">
<meta property="article:author" content="Luckys-Yang">
<meta property="article:tag" content="牛逼">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mdcm.yang5201314.cn/img/num105.webp"><link rel="shortcut icon" href="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/butterfly/blog_other/93801118587.webp"><link rel="canonical" href="https://mdcm.yang5201314.cn/post/e7143ef5.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"MSZRRKNRKT","apiKey":"71e2a5ac35435ee76602cd55d727e5ff","indexName":"aaa","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '正点原子STM32F429IGT6学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-18 10:17:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/rightmenu.css" media="all" onload="this.media='all'"><link rel="preconnect" href="https://s1.hdslb.com/" /><link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" media="all" onload="this.media='all'" /><link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/medium.css" media="all" onload="this.media='all'" /><link rel="shortcut icon" href="#"><link href="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/butterfly/css/all.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/my.css" media="all" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css" ><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/izitoast@1.4.0/dist/css/iziToast.min.css" media="all" onload="this.media='all'"><link rel="stylesheet" href="/css/aplayer.css" media="all" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><style>css-doodle {--color: @p(#51eaea, #fffde1, #ff9d76, #FB3569);--rule: (:doodle {@grid: 30x1 / 18vmin;--deg: @p(-180deg, 180deg);}:container {perspective: 30vmin;}:after, :before {content: '';background: var(--color); @place-cell: @r(100%) @r(100%); @size: @r(6px); @shape: heart;} @place-cell: center; @size: 100%;box-shadow: @m2(0 0 50px var(--color));background: @m100(radial-gradient(var(--color) 50%, transparent 0)@r(-20%, 120%) @r(-20%, 100%) / 1px 1px no-repeat); will-change: transform, opacity; animation: scale-up 12s linear infinite; animation-delay: calc(-12s / @I * @i); @keyframes scale-up { 0%, 95.01%, 100% {transform: translateZ(0) rotate(0);opacity: 0;}10% {opacity: 1;}95% {transform: translateZ(35vmin) rotateZ(@var(--deg));}})}</style><css-doodle use="var(--rule)"></css-doodle><script async="async" src="https://cdn.bootcdn.net/ajax/libs/css-doodle/0.32.2/css-doodle.min.js"></script></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/butterfly/blog_other/93801118587.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">136</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">76</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-list-alt"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/bookmarking/"><i class="fa-fw fas fa-star"></i><span> 收藏</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-pen"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-info-circle"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav class="fixed" id="nav"><span id="blog-info"><a href="/" title="Luckys-Yangの小栈"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/light.png"/></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-list-alt"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/bookmarking/"><i class="fa-fw fas fa-star"></i><span> 收藏</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-pen"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-info-circle"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">正点原子STM32F429IGT6学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-04T08:55:00.000Z" title="发表于 2022-11-04 16:55:00">2022-11-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-18T02:17:48.000Z" title="更新于 2022-11-18 10:17:48">2022-11-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/32%E7%B3%BB%E5%88%97/">32系列</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span></div></div></div><article class="post-content" id="article-container"><h2 id="前言">前言</h2>
<p>今天师兄给了一块正点原子的 STM32F4系列的板子我学习，这板挺贵的，肯定得学呀！写下此笔记记录…</p>
<p>本笔记涉及到网址及博主文章：</p>
<p>CubeMX官方下载地址：<a href="https://www.st.com/zh/development-tools/stm32cubemx.html">https://www.st.com/zh/development-tools/stm32cubemx.html</a></p>
<p><a href="https://www.st.com/content/st_com/zh/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-high-performance-mcus/stm32f4-series/stm32f429-439/stm32f429ig.html">ST官网—STM32F429IG资料</a></p>
<p><a href="https://www.armbbs.cn/forum.php?mod=viewthread&amp;tid=93255">硬汉嵌入式论坛</a></p>
<p><a href="https://www.st.com/en/development-tools/stsw-link004.html#">STM32 ST-LINK Utility下载网址</a></p>
<p>参考博主文章：<br>
<a href="https://blog.csdn.net/as480133937/article/details/99935090">https://blog.csdn.net/as480133937/article/details/99935090</a></p>
<h2 id="板子介绍">板子介绍</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221104230848.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221104230946.jpg" alt=""></p>
<ul>
<li><code>256KB SRAM</code>、 <code>1024KB FLASH</code> 、 <code>12个16位定时器</code> 、 <code>2个32位定时器</code> 、 <code>2个DMA控制器</code>（共16个通道）、 <code>6个SPI</code> 、 <code>2个全双工I2S</code> 、 <code>1个SAI</code> 、 <code>3个IIC</code> 、 <code>8个串口</code> 、 <code>2个USB</code> （支持HOST /SLAVE）、 <code>2个CAN</code> 、 <code>3个12位ADC</code> 、 <code>2个12位DAC</code> 、 <code>1个RTC</code> （带日历功能）、 <code>1个SDIO接口</code> 、 <code>1个FMC接口</code> 、 <code>1个TFTLCD控制器</code> （LTDC）、 <code>1个10/100M以太网MAC控制器</code> 、 <code>1个摄像头接口</code> 、 <code>1个硬件随机数生成器</code> 、以及 <code>140个通用IO口</code> 等</li>
<li>最高频率是  <code>180MHz</code></li>
<li>时钟挂载的外设见《stm32f429ig数据手册》18页</li>
</ul>
<h2 id="STM32CubeMx创建工程">STM32CubeMx创建工程</h2>
<p><code>File</code> — 等待进度条(在下载一下东西) — 在<code>Part Number</code>输入芯片型号(或者旁边滑动查看) — 选择 <code>STM32F429IGTx</code>，双击</p>
<h3 id="下载调试">下载调试</h3>
<p>数据线+FlyMcu(速度慢，烧一次需要等几十秒)</p>
<ul>
<li>
<p>数据线连接 <code>USB 232</code> 那个口，打开 FlyMcu 软件，设置一下： <code>DTR的低电平复位，RTS高电平进BootLoader</code>(一键下载功能)，<code>编译后执行</code>，<code>编译前重装文件</code>，<code>波特率76800</code></p>
</li>
<li>
<p>ST-LINK(SW模式，速度快，可以调试)</p>
</li>
</ul>
<h2 id="CubeMx配置汇总">CubeMx配置汇总</h2>
<h3 id="调试方式配置">调试方式配置</h3>
<p>CubeMX里 — <code>sys</code> — 选择《serial Write》</p>
<p><code>Project Manager</code> — <code>Code Generator</code> — <code>Generated files</code>(勾第一个，即生成独立的.c/.h)</p>
<p><code>Project</code> — <code>name</code>(输入文件名) —<code>Location</code>(文件保存的路径，不要有中文) — <code>IDE</code>(选择MDK) — <code>Min Version</code> 选择 <code>V5.27</code></p>
<p>点击右上角<code>GENERATE CODE</code> 生成代码(如果弹窗警告需要下载某些库则点是即可) — 下完后会出现3个选项(选择《Open Project》) — 跳转到keil后会弹出需要下载F4软件包完成后编译一下0错误0警告即可</p>
<p><code>魔法棒</code> — <code>Debug</code>选择《ST-Link》,勾《Run to main()》,点击 <code>setting</code> — <code>port</code>选择《SW》</p>
<p><code>魔法棒</code> — <code>Utilities</code> 勾《Use Debug Driver》，点击 <code>setting</code>—里面会看到一个1M的F4系列软件包，勾《Reset and Run》</p>
<p><code>魔法棒</code> — <code>C/C++</code> — <code>Define</code>填写《USE_HAL_DRIVER,STM32F429xx》，可在stm32f4xx.h <code>99,140</code> 行找到</p>
<h3 id="配置系统时钟和系统最高频率配置">配置系统时钟和系统最高频率配置</h3>
<p><code>RCC</code> —选择外部高速时钟《Crystal/Ceramic Resonator》</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105004458.jpg" alt=""></p>
<p>系统时钟配置分为6个步骤：① 时钟源参数设置(4~26范围)选择HSE为时钟源，所以必须在RCC配置中开启HSE；② 时钟源选择：HSE还是HSI，这里我们配置选择器选择HSE即可；③ PLL分频系数M配置，分频系数M我们设置为15； ④ 主PLL倍频系数N配置，倍频系数N我们设置为216；⑤ 主PLL分频系数P配置，分频系数P我们配置为2；(216/2=180) ⑥ 系统时钟时钟源选择：PLL,HSI还是HSE，这里毫无疑问，我们选择PLL</p>
<h3 id="LED配置">LED配置</h3>
<ul>
<li>管脚图配置：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">对应原理图网络标号</th>
<th style="text-align:center">对应原理图管脚</th>
<th style="text-align:center">选择功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">LED0</td>
<td style="text-align:center">PB0</td>
<td style="text-align:center">GPIO_Output(输出)</td>
</tr>
<tr>
<td style="text-align:center">LED1</td>
<td style="text-align:center">PB1</td>
<td style="text-align:center">GPIO_Output(输出)</td>
</tr>
</tbody>
</table>
<ul>
<li>GPIO配置：</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th style="text-align:center">Pin Name</th>
<th style="text-align:center">GPIO output level</th>
<th style="text-align:center">GPIO mode</th>
<th style="text-align:center">GPIO Pull-up/Pull-down</th>
<th style="text-align:center">Maximum output speed</th>
<th style="text-align:center">User Label</th>
</tr>
</thead>
<tbody>
<tr>
<td>中文</td>
<td style="text-align:center">管脚名字</td>
<td style="text-align:center">端口默认输出电平</td>
<td style="text-align:center">端口模式</td>
<td style="text-align:center">端口上拉/下拉</td>
<td style="text-align:center">最大输出速率</td>
<td style="text-align:center">用户标注</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PB0</td>
<td style="text-align:center">High<br><span style="color:red;">(高电平)</span></td>
<td style="text-align:center">Output push pull<br><span style="color:red;">(推挽)</span></td>
<td style="text-align:center">No pull up and no pull down<br><span style="color:red;">(无上下拉)</span></td>
<td style="text-align:center">High<br><span style="color:red;">(高)</span></td>
<td style="text-align:center">LED1</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PB1</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">LED0</td>
</tr>
</tbody>
</table>
<h3 id="KEY配置">KEY配置</h3>
<ul>
<li>管脚图配置：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">对应原理图网络标号</th>
<th style="text-align:center">对应原理图管脚</th>
<th style="text-align:center">选择功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">WK_UP</td>
<td style="text-align:center">PA0</td>
<td style="text-align:center">GPIO_Input(输入)</td>
</tr>
<tr>
<td style="text-align:center">KEY0</td>
<td style="text-align:center">PH3</td>
<td style="text-align:center">GPIO_Input(输入)</td>
</tr>
<tr>
<td style="text-align:center">KEY1</td>
<td style="text-align:center">PH2</td>
<td style="text-align:center">GPIO_Input(输入)</td>
</tr>
<tr>
<td style="text-align:center">KEY2</td>
<td style="text-align:center">PC13</td>
<td style="text-align:center">GPIO_Input(输入)</td>
</tr>
</tbody>
</table>
<ul>
<li>GPIO配置：</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th style="text-align:center">Pin Name</th>
<th style="text-align:center">GPIO mode</th>
<th style="text-align:center">GPIO Pull-up/Pull-down</th>
<th style="text-align:center">User Label</th>
</tr>
</thead>
<tbody>
<tr>
<td>中文</td>
<td style="text-align:center">管脚名字</td>
<td style="text-align:center">端口模式</td>
<td style="text-align:center">端口上拉/下拉</td>
<td style="text-align:center">用户标注</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">WK_UP</td>
<td style="text-align:center">Input mode<br><span style="color:red;">(输入模式)</span></td>
<td style="text-align:center">pull-down<br><span style="color:red;">(下拉)</span></td>
<td style="text-align:center">KEY_UP</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PH3</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">pull-up<br/><span style="color:red;">(上拉)</span></td>
<td style="text-align:center">KEY0</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PH2</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">KEY1</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PC13</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">KEY2</td>
</tr>
</tbody>
</table>
<h3 id="USART配置">USART配置</h3>
<ul>
<li>管脚图配置：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">对应原理图管脚</th>
<th style="text-align:center">选择功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">PA9</td>
<td style="text-align:center">USART1_RX</td>
</tr>
<tr>
<td style="text-align:center">PA10</td>
<td style="text-align:center">USART1_TX</td>
</tr>
</tbody>
</table>
<ul>
<li>USART1配置：</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th style="text-align:center">Mode</th>
<th style="text-align:center">Hardware Flow Control (RS232)</th>
</tr>
</thead>
<tbody>
<tr>
<td>中文</td>
<td style="text-align:center">模式</td>
<td style="text-align:center">硬件流控制 (RS232)</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">Asynchronous<br/><span style="color:red;">(异步通信)</span></td>
<td style="text-align:center">Disable<br><span style="color:red;">(禁用)</span></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>英文</th>
<th style="text-align:center">Baud Rate</th>
<th style="text-align:center">Hardware Flow Control (RS232)</th>
<th style="text-align:center">Word Length</th>
<th style="text-align:center">Parity</th>
<th style="text-align:center">Stop Bits</th>
<th style="text-align:center">Data Direction</th>
<th style="text-align:center">Over Sampling</th>
</tr>
</thead>
<tbody>
<tr>
<td>中文</td>
<td style="text-align:center">波特率</td>
<td style="text-align:center">硬件流控制 (RS232)</td>
<td style="text-align:center">数据长度</td>
<td style="text-align:center">奇偶校验</td>
<td style="text-align:center">停止位</td>
<td style="text-align:center">数据方向</td>
<td style="text-align:center">过采样</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">115200</td>
<td style="text-align:center">Disable<br><span style="color:red;">(禁用)</span></td>
<td style="text-align:center">8 Bits (including Parity)<br><span style="color:red;">8 位(包括奇偶校验)</span></td>
<td style="text-align:center">None<span style="color:red;">(无)</span></td>
<td style="text-align:center">1</td>
<td style="text-align:center">Receive and Transmit<br/><span style="color:red;">接收和发送</span></td>
<td style="text-align:center">16 Samples</td>
</tr>
</tbody>
</table>
<p><code>NVIC Settings</code> — <code>USART1 global interupt</code> — 勾选</p>
<h3 id="外部中断配置">外部中断配置</h3>
<ul>
<li>管脚图配置(以按键引脚为例)</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">对应原理图网络标号</th>
<th style="text-align:center">对应原理图管脚</th>
<th style="text-align:center">选择功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">WK_UP</td>
<td style="text-align:center">PA0</td>
<td style="text-align:center">GPIO_EXTI0</td>
</tr>
<tr>
<td style="text-align:center">KEY0</td>
<td style="text-align:center">PH3</td>
<td style="text-align:center">GPIO_EXTI3</td>
</tr>
<tr>
<td style="text-align:center">KEY1</td>
<td style="text-align:center">PH2</td>
<td style="text-align:center">GPIO_EXTI2</td>
</tr>
<tr>
<td style="text-align:center">KEY2</td>
<td style="text-align:center">PC13</td>
<td style="text-align:center">GPIO_EXTI13</td>
</tr>
</tbody>
</table>
<ul>
<li>GPIO配置</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th style="text-align:center">Pin Name</th>
<th style="text-align:center">GPIO mode</th>
<th style="text-align:center">GPIO Pull-up/Pull-down</th>
</tr>
</thead>
<tbody>
<tr>
<td>中文</td>
<td style="text-align:center">管脚名字</td>
<td style="text-align:center">端口模式</td>
<td style="text-align:center">端口上拉/下拉</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PA0</td>
<td style="text-align:center">Extemal Interrupt Mode with Rising edge trigger detection<br><span style="color:red;">(带有上升沿触发检测的外部中断模式)</span></td>
<td style="text-align:center">pull-down<br><span style="color:red;">(下拉)</span></td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PH3</td>
<td style="text-align:center">Extemal Interrupt Mode with Falling edge trigger detection<br/><span style="color:red;">(带有下降沿触发检测的外部中断模式)</span></td>
<td style="text-align:center">pull-up<br/><span style="color:red;">(上拉)</span></td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PH2</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
</tr>
<tr>
<td></td>
<td style="text-align:center">PC13</td>
<td style="text-align:center">同上</td>
<td style="text-align:center">同上</td>
</tr>
</tbody>
</table>
<p><code>NVIC</code> — 全部勾选Enable</p>
<h3 id="基本定时器配置">基本定时器配置</h3>
<h2 id="LED">LED</h2>
<p>硬件连接：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105171806.png" alt=""></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">&#x2F;*LED.h*&#x2F;
# ifndef __LED_H
# define __LED_H
# include &quot;stm32f4xx_hal.h&quot;
# include &quot;main.h&quot;

# define LED0_on() HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_RESET)	&#x2F;&#x2F;点亮LED0
# define LED0_Reversal() HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_1)	&#x2F;&#x2F;翻转LED0
# define LED1_Reversal() HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_0)	&#x2F;&#x2F;翻转LED1

void LED_togg(uint8_t flag);


# endif

&#x2F;*LED.c*&#x2F;
# include &quot;LED.h&quot;


&#x2F;&#x2F;LED交替点亮
void LED_togg(uint8_t flag)
&#123;
	if(0 &#x3D;&#x3D; flag)
	&#123;
		LED0_Reversal();	&#x2F;&#x2F;LED0翻转电平状态		
	&#125;
	if(1 &#x3D;&#x3D; flag)
	&#123;
		LED1_Reversal();	&#x2F;&#x2F;LED1翻转电平状态		
	&#125;
&#125;

&#x2F;*mian.c*&#x2F;
LED_togg(0);
HAL_Delay(500);
LED_togg(1);</code></pre>
<h2 id="KEY">KEY</h2>
<p>硬件连接：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221106132927.png" alt=""></p>
<p>由于外部没接上下拉电阻，所以需要配置内部上下拉电阻(KEY0/1/2是低电平有效，WK_UP是高电平有效)</p>
<h2 id="USART">USART</h2>
<p>硬件连接：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221107155518.png" alt=""></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">&#x2F;&#x2F;结构体
UART_HandleTypeDef huart1;	</code></pre>
<h2 id="外部中断">外部中断</h2>
<ul>
<li>STM32F4 的每个 IO 都可以作为外部中断的中断输入口，这点也是 STM32F4 的强大之处；STM32F429的中断控制器支持22个外部中断/事件请求。每个中断设有状态位，每个中断/事件都有独立的触发和屏蔽设置</li>
<li>广义上是指 <code>外设所产生的中断</code>。一般在实践中习惯将外部引脚的电平变化所引发的中断叫外部中断；GPIO的外部中断是由于电平变化所引起的，为了避免误触和重复中断，STM32使用 <code>边沿触发模式</code> 来触发中断</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221115181201.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221115181308.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221115181522.jpg" alt=""></p>
<p>22个外部中断：</p>
<table>
<thead>
<tr>
<th style="text-align:center">中断线</th>
<th style="text-align:center">对应</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">EXTI线0~15</td>
<td style="text-align:center">对应外部IO口的输入中断(0–&gt;PA0,PB0,…;1–&gt;PA1,PB1,…)<br>而中断线每次只能连接到1个IO口上</td>
</tr>
<tr>
<td style="text-align:center">EXTI线16</td>
<td style="text-align:center">连接到PVD输出</td>
</tr>
<tr>
<td style="text-align:center">EXTI线17</td>
<td style="text-align:center">连接到RTC闹钟事件</td>
</tr>
<tr>
<td style="text-align:center">EXTI线18</td>
<td style="text-align:center">连接到USB OTG FS唤醒事件</td>
</tr>
<tr>
<td style="text-align:center">EXTI线19</td>
<td style="text-align:center">连接到以太网唤醒事件</td>
</tr>
<tr>
<td style="text-align:center">EXTI线20</td>
<td style="text-align:center">连接到USB OTG HS(在FS中配置)唤醒事件</td>
</tr>
<tr>
<td style="text-align:center">EXTI线21</td>
<td style="text-align:center">连接到RTC入侵和时间戳事件</td>
</tr>
<tr>
<td style="text-align:center">EXTI线22</td>
<td style="text-align:center">连接到RTC唤醒事件</td>
</tr>
</tbody>
</table>
<ul>
<li>结构体</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">成员</th>
<th style="text-align:center">参数</th>
<th style="text-align:center">注意</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">EXTI_Line</td>
<td style="text-align:center">EXTI_Line0 - EXTI_Line23</td>
<td style="text-align:center">其中EXTI_Line0 - EXTI_Line15是关于GPIO的外部中断</td>
</tr>
<tr>
<td style="text-align:center">EXTI_Mode</td>
<td style="text-align:center">EXTI_Mode_Interrupt(中断模式)<br/>EXTI_Mode_Event(事件模式)</td>
<td style="text-align:center">事件模式是不产生中断的，可以用这个模式产生一个信号来驱动某些外设，以此来做到不占用CPU的算力，之后使用时会提到；另外中断本身也是事件的一种，其实就是将某些需要CPU响应的事件叫做中断，并进入某个函数</td>
</tr>
<tr>
<td style="text-align:center">EXTI_Trigger</td>
<td style="text-align:center">EXTI_Trigger_Rising(上升沿触发)<br/>EXTI_Trigger_Falling(下降沿触发)<br/>EXTI_Trigger_Rising_Falling(上升沿和下降沿触发)</td>
<td style="text-align:center">/</td>
</tr>
<tr>
<td style="text-align:center">EXTI_LineCmd</td>
<td style="text-align:center">DISABLE(失能)<br/>ENABLE(使能)</td>
<td style="text-align:center">/</td>
</tr>
</tbody>
</table>
<ul>
<li>配置NVIC需要注意</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">中断通道</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">中断服务函数写法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">EXTI0_IRQn</td>
<td style="text-align:center">外部中断0</td>
<td style="text-align:center">EXTI0_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI1_IRQn</td>
<td style="text-align:center">外部中断1</td>
<td style="text-align:center">EXTI1_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI2_IRQn</td>
<td style="text-align:center">外部中断2</td>
<td style="text-align:center">EXTI2_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI3_IRQn</td>
<td style="text-align:center">外部中断3</td>
<td style="text-align:center">EXTI3_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI4_IRQn</td>
<td style="text-align:center">外部中断4</td>
<td style="text-align:center">EXTI4_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI9_5_IRQn</td>
<td style="text-align:center">外部中断5-9</td>
<td style="text-align:center">EXTI9_5_IRQHandler</td>
</tr>
<tr>
<td style="text-align:center">EXTI15_10_IRQn</td>
<td style="text-align:center">外部中断10-15</td>
<td style="text-align:center">EXTI15_10_IRQHandler</td>
</tr>
</tbody>
</table>
<p>注意 <code>外部中断0 到 外部中断4</code> 有独立的中断优先级和中断服务函数，而 <code>外部中断5-9</code> 共用一个中断优先级和中断服务函数， <code>外部中断10-15</code> 同理，可以在外部中断5-9中使用 <code>检测中断标志位的方式来区分是哪个中断触发</code></p>
<p>当外部中断触发时，就会在一个叫做 外部中断挂起寄存器 的特点位置写入数据也就是一个标志位，可以使用标准库函数读取和更改标准位，每当这个标志位置为设置状态时就会自动跳转到对应的中断服务函数(为了避免出现异常调用，一般在中断服务函数里做一个验证，读取这个标志位是否为置位状态<br>
而且每当中断服务函数结束并且需要下次中断执行中断服务函数，则需要在函数的最后清除中断标志位)</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">&#x2F;&#x2F;使用这个函数读取中断标志位
ITStatus EXTI_GetITStatus(uint32_t EXTI_Line)
&#x2F;&#x2F;返回值
RESET			&#x2F;&#x2F;没触发中断
SET				&#x2F;&#x2F;触发了中断 
&#x2F;&#x2F;清除标志位函数
EXTI_ClearITPendingBit(uint32_t EXTI_Line)    </code></pre>
<h2 id="定时器">定时器</h2>
<table>
<thead>
<tr>
<th style="text-align:center">定时器</th>
<th style="text-align:center">通道管脚</th>
<th style="text-align:center">分辨率(位)</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">捕获/比较通道</th>
<th style="text-align:center">级别</th>
<th style="text-align:center">DMA请求</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TIM1</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4(有互补)</td>
<td style="text-align:center">高级</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM8</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4(有互补)</td>
<td style="text-align:center">高级</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM2</td>
<td style="text-align:center"></td>
<td style="text-align:center">32</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM5</td>
<td style="text-align:center"></td>
<td style="text-align:center">32</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM3</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM4</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增/递减</td>
<td style="text-align:center">4</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM9</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">2</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM10</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">1</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM11</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">1</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM12</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">2</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM13</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">1</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM14</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">1</td>
<td style="text-align:center">通用</td>
<td style="text-align:center">N</td>
</tr>
<tr>
<td style="text-align:center">TIM6</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">0</td>
<td style="text-align:center">基本</td>
<td style="text-align:center">Y</td>
</tr>
<tr>
<td style="text-align:center">TIM7</td>
<td style="text-align:center"></td>
<td style="text-align:center">16</td>
<td style="text-align:center">递增</td>
<td style="text-align:center">0</td>
<td style="text-align:center">基本</td>
<td style="text-align:center">Y</td>
</tr>
</tbody>
</table>
<p>因为系统初始化Systemlnit函数里初始化APB 1总线时钟为4分频即42M，APB2总线时钟为2分频即84M,所以 <code>TIM1、 TIM8- TIM11</code>的时钟为APB2时钟的两倍即168M， <code>TIM2~ TIM7、TIM12~TIM14</code> 的时钟为APB1的时钟的两倍即84M(<span style="color:red;">注意这个智能硬件定时器有用到</span>)</p>
<h2 id="停更说明">停更说明</h2>
<p>由于板子Bug很多暂时停更了</p>
<h2 id="附1：注意问题汇总">附1：注意问题汇总</h2>
<ul>
<li><code>__weak修饰符</code>(弱函数)：用户可以在用户文件中重新定义一个同名函数，最终编译器编译的时候，会选择用户定义的函数，如果用户没有重新定义这个函数，那么编译器就会执行__weak声明的函数，并且编译器不会报错</li>
<li>如果开发板上STM32采用外部晶振，那么就不能选择 <code>BYPASS Clock Source </code>(旁路时钟源)模式，否则STM32将会工作不正常。</li>
<li>HAL库的 <code>延时函数</code> 有一个局限性，在中断服务函数中使用HAL_Delay会引起混乱，因为它是通过中断方式实现，而Systick的 <code>中断优先级是最低的</code> ，所以在中断中运行HAL_Delay会导致延时出现严重误差</li>
<li>GPIO模式配置最大速率时F4系列增多一个 <code>very High</code>(F1没有)</li>
<li>如果发现下载时弹出 <code>Error: Flash Download failed - “Cortex-M4“</code> ，说明可能读写保护被打开了，可以试试 <code>魔术棒</code> — <code>Debug</code> — <code>Settings</code>  — 把 <code>verify</code> 去掉勾试试；如果不行得去ST官网下载 <code>STM32 ST-LINK Utility</code> 软件，烧代码时弹出黄色窗口点击确定即可解除读写保护；如不会用此软件见另一篇《STM32物联网入门(1-30)》第4章 (2022/11/6遇到的问题)</li>
<li></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">HAL 状态结构定义(返回值)</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HAL_BUS</td>
<td style="text-align:center">忙碌</td>
</tr>
<tr>
<td style="text-align:center">HAL_ERROR</td>
<td style="text-align:center">错误</td>
</tr>
<tr>
<td style="text-align:center">HAL_OK</td>
<td style="text-align:center">成功</td>
</tr>
<tr>
<td style="text-align:center">HAL_TIMEOUT</td>
<td style="text-align:center">超时</td>
</tr>
</tbody>
</table>
<h2 id="附2：CubeMX分布图">附2：CubeMX分布图</h2>
<ul>
<li>在管脚图上方 — <code>System view</code> (可以看到已经打开了哪些功能)</li>
<li>相同配置的引脚可以用 <code>CTRL</code> 或者 <code>SHIFT</code> 选中后一键配置</li>
</ul>
<h2 id="附3：CubeMX中英文对照-含义解释">附3：CubeMX中英文对照/含义解释</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105114734.png" alt=""></p>
<table>
<thead>
<tr>
<th style="text-align:center">英文</th>
<th style="text-align:center">中文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Open Existing Projects</td>
<td style="text-align:center">打开项目工程</td>
</tr>
<tr>
<td style="text-align:center">Start My project from MCU</td>
<td style="text-align:center">从MCU开始我的项目</td>
</tr>
<tr>
<td style="text-align:center">Start My project from STBoard</td>
<td style="text-align:center">从ST开发板开始我的项目</td>
</tr>
<tr>
<td style="text-align:center">Start My project from Cross Selector</td>
<td style="text-align:center">从交叉选择器启动我的项目</td>
</tr>
<tr>
<td style="text-align:center">CHECK FOR UPDATE</td>
<td style="text-align:center">检查更新</td>
</tr>
<tr>
<td style="text-align:center">INSTALL/REMOVE</td>
<td style="text-align:center">安装/移除软件包</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105120114.png" alt=""></p>
<table>
<thead>
<tr>
<th style="text-align:center">英文</th>
<th style="text-align:center">中文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">New Project</td>
<td style="text-align:center">新建工程</td>
</tr>
<tr>
<td style="text-align:center">Load Project</td>
<td style="text-align:center">导入工程</td>
</tr>
<tr>
<td style="text-align:center">Import Project</td>
<td style="text-align:center">引入项目</td>
</tr>
<tr>
<td style="text-align:center">Save Project</td>
<td style="text-align:center">保存工程</td>
</tr>
<tr>
<td style="text-align:center">Save Project As</td>
<td style="text-align:center">另存工程</td>
</tr>
<tr>
<td style="text-align:center">Close Project</td>
<td style="text-align:center">关闭工程</td>
</tr>
<tr>
<td style="text-align:center">Generate Report</td>
<td style="text-align:center">生成报告</td>
</tr>
<tr>
<td style="text-align:center">Recent Projects</td>
<td style="text-align:center">最近工程</td>
</tr>
<tr>
<td style="text-align:center">Exit</td>
<td style="text-align:center">退出软件</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105121102.png" alt=""></p>
<table>
<thead>
<tr>
<th style="text-align:center">英文</th>
<th style="text-align:center">中文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Help</td>
<td style="text-align:center">帮助(STM32CubeMX的用户手册)</td>
</tr>
<tr>
<td style="text-align:center">About</td>
<td style="text-align:center">关于(STM32CubeMX的版本信息)</td>
</tr>
<tr>
<td style="text-align:center">Docs &amp; Resources</td>
<td style="text-align:center">文档和资源</td>
</tr>
<tr>
<td style="text-align:center">Tutorial Videos</td>
<td style="text-align:center">教程视频</td>
</tr>
<tr>
<td style="text-align:center">Refresh Data</td>
<td style="text-align:center">更新数据(更新MCU/BOARD数据，HAL库版本信息)</td>
</tr>
<tr>
<td style="text-align:center">User Preferences</td>
<td style="text-align:center">用户设定(是否允许ST公司获取你的使用数据)</td>
</tr>
<tr>
<td style="text-align:center">Check for Updates</td>
<td style="text-align:center">检测更新</td>
</tr>
<tr>
<td style="text-align:center">Manage embedded…</td>
<td style="text-align:center">软件包管理</td>
</tr>
<tr>
<td style="text-align:center">Updater Settings</td>
<td style="text-align:center">更新设置</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/202205091414613.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/202205091421289.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/202205091424150.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105110401.jpg" alt=""></p>
<p>cubeMX管脚图颜色含义：</p>
<table>
<thead>
<tr>
<th style="text-align:center">颜色</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span style="color:rgb(255,246,204);"> 浅黄色</span></td>
<td style="text-align:center">表示 <code>不可配置引脚</code> 电源专用引脚以浅黄色突出显示。其配置 <code>不能更改</code></td>
</tr>
<tr>
<td style="text-align:center"><span style="color:rgb(187,204,0);">深黄色</span></td>
<td style="text-align:center">表示 <code>你配置了一个I/O口的功能</code>，但是没有初始化相对应的外设功能 引脚处于 <code>no mode</code> 状态</td>
</tr>
<tr>
<td style="text-align:center"><span style="color:rgb(0,204,68);">绿色</span></td>
<td style="text-align:center">表示配置成功</td>
</tr>
</tbody>
</table>
<p>cubeMX外设配置图标含义：</p>
<table>
<thead>
<tr>
<th style="text-align:center">图标</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">圆圈中间一个勾(绿色)</td>
<td style="text-align:center">表示没问题</td>
</tr>
<tr>
<td style="text-align:center">三角形中间一个感叹号(黄色)</td>
<td style="text-align:center">表示警告，对应配置出现问题 点击该选项即可 <code>外设配置</code> 界面查看</td>
</tr>
</tbody>
</table>
<h2 id="附4：系统时钟RCC详解">附4：系统时钟RCC详解</h2>
<ul>
<li>什么是时钟？</li>
</ul>
<p><code>时钟是单片机运行的基础，时钟信号推动单片机内各个部分执行相应的指令。</code> 时钟系统就是CPU的脉搏，决定cpu速率，像人的心跳一样 只有有了心跳，人才能做其他的事情，而单片机有了时钟，才能够运行执行指令，才能够做其他的处理 (点灯，串口，ADC)，时钟的重要性不言而喻。</p>
<ul>
<li>为什么 STM32 要有多个时钟源呢？</li>
</ul>
<p>STM32本身十分复杂，外设非常多，但我们实际使用的时候只会用到有限的几个外设， <code>使用任何外设都需要时钟才能启动</code>，但并不是所有的外设都需要系统时钟那么高的频率，为了兼容不同速度的设备，有些高速，有些低速， <code>如果都用高速时钟，势必造成浪费</code>  ， <code>同一个电路，时钟越快功耗越快，同时抗电磁干扰能力也就越弱</code>，所以较为复杂的MCU都是采用多时钟源的方法来解决这些问题。所以便有了STM32的 <code>时钟系统和时钟树</code></p>
<p><span style="color:red;">总结：</span></p>
<p>① STM32时钟系统主要的目的就是 <code>给相对独立的外设模块提供时钟</code>，也是为了 <code>降低整个芯片的耗能</code></p>
<p>② 系统时钟是处理器运行时间基准（每一条机器指令一个时钟周期）</p>
<p>③ 时钟是单片机运行的基础，时钟信号推动单片机内各个部分执行相应的指令</p>
<p>④ 一个单片机内 <code>提供多个不同的系统时钟，可以适应更多的应用场合</code></p>
<p>⑤ 不同的功能模块会有不同的时钟上限，因此提供不同的时钟，也能在一个单片机内放置更多的功能模块。 <code>对不同模块的时钟增加开启和关闭功能，可以降低单片机的功耗</code></p>
<p>⑥ STM32为了低功耗，他将所有的外设时钟都设置为 <code>Disable</code>(不使能)，用到什么外设，只要打开对应外设的时钟就可以， 其他的没用到的可以还是 <code>Disable</code>(不使能)，这样耗能就会减少。  这就是为什么不管你配置什么功能都需要先打开对应的时钟的原因</p>
<p>F1系列时钟图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/2019080810214187.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105142112.jpg" alt=""></p>
<p><code>从左到右可以简单理解为： 各个时钟源---&gt;系统时钟来源的设置---&gt;各个外设时钟的设置</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">问</th>
<th style="text-align:center">答</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">STM32 有4个独立时钟源</td>
<td style="text-align:center">HSI、HSE、LSI、LSE，PLL(严格来说不是独立的)</td>
</tr>
<tr>
<td style="text-align:center">HSI</td>
<td style="text-align:center">高速内部时钟，RC振荡器，频率为 <code>8MHz</code> ，精度不高</td>
</tr>
<tr>
<td style="text-align:center">HSE</td>
<td style="text-align:center">高速外部时钟，可接石英/陶瓷谐振器，或者接外部时钟源，频率范围为 <code>4MHz~16MHz</code></td>
</tr>
<tr>
<td style="text-align:center">LSI</td>
<td style="text-align:center">低速内部时钟，RC振荡器，频率为 <code>40kHz</code>，提供低功耗时钟</td>
</tr>
<tr>
<td style="text-align:center">LSE</td>
<td style="text-align:center">低速外部时钟，接频率为 <code>32.768kHz</code> 的石英晶体</td>
</tr>
<tr>
<td style="text-align:center">知识点1</td>
<td style="text-align:center">LSI是作为 <code>IWDGCLK(独立看门狗)时钟源和RTC时钟源</code>  而独立使用</td>
</tr>
<tr>
<td style="text-align:center">知识点2</td>
<td style="text-align:center">而 <code>HSI高速内部时钟 HSE高速外部时钟 PLL锁相环时钟</code> 这三个经过分频或者倍频 作为 <code>系统时钟</code>来使用</td>
</tr>
<tr>
<td style="text-align:center">PLL</td>
<td style="text-align:center">PLL为锁相环倍频输出，其时钟输入源可选择为 <code>HSI/2、HSE或HSE/2</code>。倍频可选择为 <code>2~16</code> 倍，但是其输出频率 <code>最大不得超过72MHz</code>。通过倍频之后作为系统时钟的时钟源</td>
</tr>
<tr>
<td style="text-align:center">默认的72MHz是怎么来的?</td>
<td style="text-align:center">外部晶振(HSE)提供的 <code>8MHz</code>（与电路板上的晶振的相关）通过PLLXTPRE分频器后，进入PLLSRC选择开关，进而通过PLLMUL锁相环进行 <code>倍频(x9)</code> 后，为系统提供 <code>72MHz</code>的系统时钟（SYSCLK）。之后是AHB预分频器对时钟信号进行分频，然后为低速外设提供时钟<br>8/1*9=72</td>
</tr>
</tbody>
</table>
<p>F4系列时钟图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/QQ%E6%88%AA%E5%9B%BE20221105142724.jpg" alt=""></p>
<table>
<thead>
<tr>
<th style="text-align:center">问</th>
<th style="text-align:center">答</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">STM32 有4个独立时钟源</td>
<td style="text-align:center">HSI、HSE、LSI、LSE，PLL(严格来说不是独立的)</td>
</tr>
<tr>
<td style="text-align:center">HSI</td>
<td style="text-align:center">高速内部时钟，RC振荡器，频率为 <code>16MHz</code> 可以直接作为系统时钟或者用作PLL输入</td>
</tr>
<tr>
<td style="text-align:center">HSE</td>
<td style="text-align:center">高速外部时钟，可接石英/陶瓷谐振器，或者接外部时钟源，频率范围为4MHz~26MHz。我们的开发板接的是 <code>25M</code> 的晶振</td>
</tr>
<tr>
<td style="text-align:center">LSI</td>
<td style="text-align:center">低速内部时钟，RC振荡器，频率为 <code>32kHz</code>，提供低功耗时钟</td>
</tr>
<tr>
<td style="text-align:center">LSE</td>
<td style="text-align:center">低速外部时钟，接频率为 <code>32.768kHz</code> 的石英晶体</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">例如我们的外部晶振选择25MHz。同时我们设置相应的分频器M=25，倍频器倍频系数N=360，分频器分频系数P=2，那么主PLL生成的第一个输出高速时钟PLLP为:<br> <code>PLL=25MHz * N/ (M*P)=25MHz* 360 /(25*2) = 180MHz</code></td>
</tr>
</tbody>
</table>
<h2 id="附5：所用到HAL库函数汇总">附5：所用到HAL库函数汇总</h2>
<p>GPIO类：</p>
<table>
<thead>
<tr>
<th style="text-align:center">函数名</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">返回值</th>
<th style="text-align:center">注意点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HAL_GPIO_TogglePin</td>
<td style="text-align:center">翻转电平状态</td>
<td style="text-align:center">/</td>
<td style="text-align:center">/</td>
</tr>
<tr>
<td style="text-align:center">HAL_GPIO_ReadPin</td>
<td style="text-align:center">读取指定的输入端口引脚</td>
<td style="text-align:center">RESET/SET</td>
<td style="text-align:center">/</td>
</tr>
<tr>
<td style="text-align:center">HAL_GPIO_WritePin</td>
<td style="text-align:center">设置或清除选定的数据端口位</td>
<td style="text-align:center">/</td>
<td style="text-align:center">/</td>
</tr>
</tbody>
</table>
<p>USART类：</p>
<table>
<thead>
<tr>
<th style="text-align:center">函数名</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">返回值</th>
<th style="text-align:center">注意点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HAL_UART_Transmit</td>
<td style="text-align:center">串口发送指定长度的数据</td>
<td style="text-align:center">如果超时没发送完成，则不再发送，返回超时标志(HAL_TIMEOUT)；成功返回HAL_OK</td>
<td style="text-align:center">/</td>
</tr>
<tr>
<td style="text-align:center">HAL_UART_Receive_IT</td>
<td style="text-align:center">串口中断接收，以中断方式接收指定长度数据</td>
<td style="text-align:center">/</td>
<td style="text-align:center">直到接收到指定长度数据，而后关闭中断，进入中断接收回调函数，不再触发接收中断</td>
</tr>
<tr>
<td style="text-align:center">HAL_GPIO_WritePin</td>
<td style="text-align:center">设置或清除选定的数据端口位</td>
<td style="text-align:center">/</td>
<td style="text-align:center">/</td>
</tr>
</tbody>
</table>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/num105.webp" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%BF%E5%AD%90%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">板子介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#STM32CubeMx%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">STM32CubeMx创建工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E8%B0%83%E8%AF%95"><span class="toc-number">3.1.</span> <span class="toc-text">下载调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CubeMx%E9%85%8D%E7%BD%AE%E6%B1%87%E6%80%BB"><span class="toc-number">4.</span> <span class="toc-text">CubeMx配置汇总</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">调试方式配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9F%E5%92%8C%E7%B3%BB%E7%BB%9F%E6%9C%80%E9%AB%98%E9%A2%91%E7%8E%87%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">配置系统时钟和系统最高频率配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LED%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">LED配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KEY%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.</span> <span class="toc-text">KEY配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#USART%E9%85%8D%E7%BD%AE"><span class="toc-number">4.5.</span> <span class="toc-text">USART配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD%E9%85%8D%E7%BD%AE"><span class="toc-number">4.6.</span> <span class="toc-text">外部中断配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%AE%9A%E6%97%B6%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">4.7.</span> <span class="toc-text">基本定时器配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LED"><span class="toc-number">5.</span> <span class="toc-text">LED</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#KEY"><span class="toc-number">6.</span> <span class="toc-text">KEY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#USART"><span class="toc-number">7.</span> <span class="toc-text">USART</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD"><span class="toc-number">8.</span> <span class="toc-text">外部中断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">9.</span> <span class="toc-text">定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%81%9C%E6%9B%B4%E8%AF%B4%E6%98%8E"><span class="toc-number">10.</span> <span class="toc-text">停更说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%841%EF%BC%9A%E6%B3%A8%E6%84%8F%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB"><span class="toc-number">11.</span> <span class="toc-text">附1：注意问题汇总</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%842%EF%BC%9ACubeMX%E5%88%86%E5%B8%83%E5%9B%BE"><span class="toc-number">12.</span> <span class="toc-text">附2：CubeMX分布图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%843%EF%BC%9ACubeMX%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7-%E5%90%AB%E4%B9%89%E8%A7%A3%E9%87%8A"><span class="toc-number">13.</span> <span class="toc-text">附3：CubeMX中英文对照&#x2F;含义解释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%844%EF%BC%9A%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9FRCC%E8%AF%A6%E8%A7%A3"><span class="toc-number">14.</span> <span class="toc-text">附4：系统时钟RCC详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%845%EF%BC%9A%E6%89%80%E7%94%A8%E5%88%B0HAL%E5%BA%93%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB"><span class="toc-number">15.</span> <span class="toc-text">附5：所用到HAL库函数汇总</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Luckys-Yang</div><div class="footer_custom_text"><div class="github-badge"><a href="http://beian.miit.gov.cn/" target="_blank" title="粤ICP备 2022026282号-1" ), pointer;"><span class="badge-subject">粤ICP备</span><span class="badge-value bg-green">2022026282号-1</span></a></div><div class="github-badge"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44070502000559" title="44070502000559号"><span class="badge-subject"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bed.attainment.cn/img/40.png" style="float:left;" />粤公网安备</span><span class="badge-value bg-green">44070502000559号</span></a></div><div><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/butterfly/blog_other/Frame-Hexo-blue.svg" title="博客框架为 Hexo" alt="HEXO"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/butterfly/blog_other/Theme-Butterfly-6513df.svg" title="主题采用 Butterfly" alt="Butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://vercel.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/Hosted-Vercel-brightgreen.svg" title="本站采用多线部署，次线路托管于Vercel" alt="HEXO"></a></div></div><div id="running-time" style="color: #5c5c5c;"><script>setInterval(()=>{let create_time=Math.round(new Date('3/10/2022 08:00:00').getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已苟活了 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()">播放音乐</div><meting-js id="8183137343" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-paw"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="https://yang5201314.cn/"><i class="fa fa-home"></i><span>主页</span></a><a class="rightMenu-item" href="/categories/"><i class="fa-solid fa-folder-open"></i><span>文章分类</span></a><a class="rightMenu-item" href="/tags/"><i class="fa-solid fa-tags"></i><span>文章标签</span></a><a class="rightMenu-item" href="/archives/"><i class="fa-solid fa-folder-open"></i><span>文章归档</span></a><a class="rightMenu-item" href="https://www.foreverblog.cn/go.html" target="_blank"><i class="fa fa-certificate"></i><span>虫洞</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script defer src="/js/tw_cn.js"></script><script defer src="https://cdn.staticfile.org/fancyapps-ui/4.0.27/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module" defer></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script defer src="https://jsd.onmicrosoft.cn/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script defer src="https://jsd.onmicrosoft.cn/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia.js"></script><div class="js-pjax"></div><script src="https://jsd.onmicrosoft.cn/npm/prismjs/prism.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async type="text/javascript" src="https://jsd.onmicrosoft.cn/npm/izitoast@1.4.0/dist/js/iziToast.min.js"></script><script>
    document.body.oncopy = function () {
        iziToast.info({
            timeout: 4000, // 关闭弹窗的时间
          // icon: 'Fontawesome', // 图标类别
            closeOnEscape: 'true', // 允许使用Esc键关闭弹窗
            transitionIn: 'bounceInLeft', // 弹窗打开动画
            transitionOut: 'fadeOutRight', // 弹窗关闭动画
            displayMode: 'replace', // 替换已经打开的弹窗
            layout: '2', // Medium模式
            position: 'topRight', // 弹窗位置
            //icon: 'fad fa-copy', // 图标类名
            iconUrl:'https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/1122star.svg',
            backgroundColor: 'rgb(179, 182, 180)', // 弹窗背景色
            title: '复制成功', // 通知标题
            message: '键盘敲烂 月薪过万' // 通知消息内容
        });
    }
</script>
<script defer type="text/javascript" src="/js/rightmenu.js"></script><script  type="text/javascript" src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script defer type="text/javascript" src="/js/IPdw.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer data-pjax src="/js/newYear.js"></script><script defer src="/js/my_aplayer.js"></script><script defer src="/js/meting.js"></script><script id="click-heart" src="https://jsd.onmicrosoft.cn/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.staticfile.org/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["link[rel=\"canonical\"]","meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1s');
    arr[i].setAttribute('data-wow-delay', '250ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>